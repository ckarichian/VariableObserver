/* Variable Observer (0.1beta) / Carl Karichian / http://github.com/ckarichian/VariableObserver */
!function(e,n){"function"==typeof define&&define.amd?define([],n):"undefined"!=typeof module&&module.exports?module.exports=n():e.VariableObserver=n()}(this,function(){function e(){var e={},n=null,t=this,o=["debug","prototype","hasOwnProperty","constructor","propertyIsEnumerable"];this.debug=!1;var r=function(t){if(n="undefined"!=typeof t&&"string"==typeof t&&e.hasOwnProperty(t)?t:n,null==n)throw"PARAM_MISSING : A variable name must be entered or chained to silence it";return!0};this.end=function(){return n=null,t},this.add=function(r,i,s){if("string"!=typeof r||o.indexOf(r)>-1)throw"ADD_ERROR: Invalid variable name";return n=r,this.hasOwnProperty(r)&&delete this[r],e[r]={stored:i,onchange:"function"==typeof s?s:function(){},onget:function(){},locked:!1},Object.defineProperty(this,r,{get:function(){return e[r].onget(),e[r].stored},set:function(n){e[r].locked||(e[r].onchange(n,e[r].stored),e[r].stored=n)}}),t},this.silence=function(o){return r(o),e[n].onGet=function(){},e[n].onChange=function(){},this.debug&&console.debug("VariableObserver","silenced",n),t},this.lock=function(o){return r(o),e[n].locked=!0,this.debug&&console.debug("VariableObserver","locked",n),t},this.toggle=function(o){return r(o),e[n].locked=!e[n].locked,this.debug&&console.debug("VariableObserver",e[n].locked?"locked":"unlocked",n),t},this.unlock=function(o){return r(o),e[n].locked=!1,this.debug&&console.debug("VariableObserver","unlocked",n),t},this.onchange=function(e,t){return this.debug&&console.debug("VariableObserver","addlistener onchange",n),this.addListener("onchange",e,t)},this.onget=function(e,t){return this.debug&&console.debug("VariableObserver","addlistener onget",n),this.addListener("onget",e,t)},this.addListener=function(o,i,s){switch(typeof i){case"function":r(n),s=i;break;case"string":r(i),s="function"==typeof s?s:null;break;default:throw"LISTENER_ERROR : Improperly defined listener requested"}if(!s)throw"LISTENER_ERROR : The listener was not properly defined";return e[n][o]=s,t},this.select=function(o){if("string"!=typeof o&&!e.hasOwnProperty(o))throw"SELECT_ERROR : A proper parameter must be identified to select";return n=o,t}}return e});
