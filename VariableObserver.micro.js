/* Variable Observer (0.1beta) / Carl Karichian / http://github.com/ckarichian/VariableObserver */
function VariableObserver(){var e={},n=null,t=this,o=["debug","prototype","hasOwnProperty","constructor","propertyIsEnumerable"];this.debug=!1;var i=function(t){if(n="undefined"!=typeof t&&"string"==typeof t&&e.hasOwnProperty(t)?t:n,null==n)throw"PARAM_MISSING";return!0};this.end=function(){return n=null,t},this.add=function(i,r,u){if("string"!=typeof i||o.indexOf(i)>-1)throw"ADD_ERROR_INVALID";return n=i,this.hasOwnProperty(i)&&delete this[i],e[i]={stored:r,onchange:"function"==typeof u?u:function(){},onget:function(){},locked:!1},Object.defineProperty(this,i,{get:function(){return e[i].onget(),e[i].stored},set:function(n){e[i].locked||(e[i].onchange(n,e[i].stored),e[i].stored=n)}}),t},this.silence=function(o){return i(o),e[n].onGet=function(){},e[n].onChange=function(){},this.debug&&console.debug("Vo","silenced",n),t},this.lock=function(o){return i(o),e[n].locked=!0,this.debug&&console.debug("Vo","locked",n),t},this.toggle=function(o){return i(o),e[n].locked=!e[n].locked,this.debug&&console.debug("Vo",e[n].locked?"locked":"unlocked",n),t},this.unlock=function(o){return i(o),e[n].locked=!1,this.debug&&console.debug("Vo","unlocked",n),t},this.onchange=function(e,t){return this.debug&&console.debug("Vo","list onchange",n),this.addListener("onchange",e,t)},this.onget=function(e,t){return this.debug&&console.debug("Vo","list onget",n),this.addListener("onget",e,t)},this.addListener=function(o,r,u){switch(typeof r){case"function":i(n),u=r;break;case"string":i(r),u="function"==typeof u?u:null;break;default:throw"LISTENER_INVALID"}if(!u)throw"LISTENER_INVALID";return e[n][o]=u,t},this.select=function(o){if("string"!=typeof o&&!e.hasOwnProperty(o))throw"SELECT_ERROR";return n=o,t}}
